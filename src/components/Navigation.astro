---
const navLinks = [
  { label: 'Product',    href: '#features'   },
  { label: 'Pricing',    href: '#pricing'     },
  { label: 'Philosophy', href: '#philosophy'  },
  { label: 'Docs',       href: '#'            },
];
---

<header class="nav" id="nav">
  <div class="nav-inner">

    <a href="/" class="nav-logo" aria-label="TAR home">
      <span>tar.</span>
    </a>

    <nav class="nav-links" aria-label="Main navigation">
      {navLinks.map(link => (
        <a href={link.href} class="nav-link">{link.label}</a>
      ))}
    </nav>

    <div class="nav-actions">
      <a href="#signup" class="nav-login">Log in</a>
      <a href="#signup" class="nav-cta">Get started</a>
    </div>

    <button
      class="nav-burger"
      id="nav-burger"
      aria-label="Toggle menu"
      aria-expanded="false"
      aria-controls="nav-drawer"
    >
      <span class="bl"></span>
      <span class="bl"></span>
      <span class="bl"></span>
    </button>

  </div>
</header>

<div class="nav-drawer" id="nav-drawer" aria-hidden="true">
  <div class="drawer-inner">
    <nav class="drawer-links" aria-label="Mobile navigation">
      {navLinks.map(link => (
        <a href={link.href} class="drawer-link">{link.label}</a>
      ))}
    </nav>
    <div class="drawer-actions">
      <a href="#signup" class="drawer-login">Log in</a>
      <a href="#signup" class="drawer-cta">Get started</a>
    </div>
  </div>
</div>

<div class="nav-overlay" id="nav-overlay" aria-hidden="true"></div>

<script>
  const nav     = document.getElementById('nav')!;
  const burger  = document.getElementById('nav-burger')!;
  const drawer  = document.getElementById('nav-drawer')!;
  const overlay = document.getElementById('nav-overlay')!;

  const open = () => {
    burger.setAttribute('aria-expanded', 'true');
    burger.classList.add('open');
    drawer.classList.add('open');
    overlay.classList.add('open');
    drawer.setAttribute('aria-hidden', 'false');
    document.body.style.overflow = 'hidden';
  };

  const close = () => {
    burger.setAttribute('aria-expanded', 'false');
    burger.classList.remove('open');
    drawer.classList.remove('open');
    overlay.classList.remove('open');
    drawer.setAttribute('aria-hidden', 'true');
    document.body.style.overflow = '';
  };

  burger.addEventListener('click', () => burger.classList.contains('open') ? close() : open());
  overlay.addEventListener('click', close);
  drawer.querySelectorAll('a').forEach(a => a.addEventListener('click', close));
  document.addEventListener('keydown', e => e.key === 'Escape' && close());

  window.addEventListener('scroll', () => {
    nav.classList.toggle('scrolled', window.scrollY > 12);
  }, { passive: true });
</script>

<style>
/* ── Shell ─────────────────────────────────────── */
.nav {
  position: fixed;
  inset: 0 0 auto 0;
  z-index: 900;
  height: 68px;
  background: rgba(255,255,255,0.92);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border-bottom: 1px solid transparent;
  transition: border-color var(--dur-base) ease,
              box-shadow   var(--dur-base) ease,
              background   var(--dur-base) ease;
}

.nav.scrolled {
  background: rgba(255,255,255,0.98);
  border-bottom-color: var(--border);
  box-shadow: 0 1px 0 var(--border), 0 4px 20px rgba(0,0,0,0.05);
}

/* ── Inner ─────────────────────────────────────── */
.nav-inner {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 40px;
  height: 100%;
  display: flex;
  align-items: center;
  gap: 0;
}

@media (max-width: 768px) {
  .nav-inner { padding: 0 20px; }
}

/* ── Logo ──────────────────────────────────────── */
.nav-logo {
  display: flex;
  align-items: center;
  text-decoration: none;
  flex-shrink: 0;
  margin-right: 40px;
}

.nav-logo span {
  font-family: var(--font-display);
  font-size: 1.5rem;
  font-weight: 700;
  letter-spacing: -0.04em;
  color: var(--ink);
  line-height: 1;
}

/* ── Desktop links ─────────────────────────────── */
.nav-links {
  display: flex;
  align-items: center;
  gap: 0;
  flex: 1;
}

.nav-link {
  font-family: var(--font-sans);
  font-size: 0.9rem;
  font-weight: 500;
  color: var(--ink-3);
  padding: 8px 14px;
  border-radius: var(--r-pill);
  transition: color var(--dur-fast) ease, background var(--dur-fast) ease;
  white-space: nowrap;
  text-decoration: none;
}

.nav-link:hover {
  color: var(--ink);
  background: rgba(0,0,0,0.05);
}

/* ── Desktop CTAs ──────────────────────────────── */
.nav-actions {
  display: flex;
  align-items: center;
  gap: 8px;
  flex-shrink: 0;
  margin-left: auto;
}

.nav-login {
  font-size: 0.9rem;
  font-weight: 500;
  color: var(--ink-3);
  padding: 8px 16px;
  border-radius: var(--r-pill);
  transition: color var(--dur-fast) ease, background var(--dur-fast) ease;
  text-decoration: none;
  white-space: nowrap;
}

.nav-login:hover {
  color: var(--ink);
  background: rgba(0,0,0,0.05);
}

.nav-cta {
  font-size: 0.875rem;
  font-weight: 600;
  color: #fff;
  background: var(--red);
  padding: 9px 20px;
  border-radius: var(--r-pill);
  transition: background var(--dur-fast) ease, transform var(--dur-fast) ease,
              box-shadow var(--dur-fast) ease;
  white-space: nowrap;
  text-decoration: none;
}

.nav-cta:hover {
  background: var(--red-dark);
  transform: scale(1.03);
  box-shadow: 0 4px 14px rgba(200,16,46,0.30);
}

/* ── Hamburger ─────────────────────────────────── */
.nav-burger {
  display: none;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  gap: 5px;
  width: 40px;
  height: 40px;
  padding: 8px;
  background: none;
  border: none;
  cursor: pointer;
  border-radius: var(--r-sm);
  flex-shrink: 0;
  margin-left: auto;
  transition: background var(--dur-fast) ease;
}

.nav-burger:hover { background: rgba(0,0,0,0.06); }

.bl {
  display: block;
  width: 20px;
  height: 1.75px;
  background: var(--ink);
  border-radius: 2px;
  transition: transform 0.24s var(--ease-out), opacity 0.2s ease, width 0.2s ease;
  transform-origin: center;
}

.nav-burger.open .bl:nth-child(1) { transform: translateY(6.75px) rotate(45deg); }
.nav-burger.open .bl:nth-child(2) { opacity: 0; transform: scaleX(0); }
.nav-burger.open .bl:nth-child(3) { transform: translateY(-6.75px) rotate(-45deg); }

/* ── Mobile drawer ─────────────────────────────── */
.nav-drawer {
  position: fixed;
  top: 68px;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 850;
  background: #fff;
  transform: translateY(-10px);
  opacity: 0;
  pointer-events: none;
  transition: transform 0.26s var(--ease-out), opacity 0.22s ease;
  overflow-y: auto;
}

.nav-drawer.open {
  transform: translateY(0);
  opacity: 1;
  pointer-events: all;
}

.drawer-inner {
  padding: 32px 24px 48px;
  display: flex;
  flex-direction: column;
  gap: 32px;
}

.drawer-links {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.drawer-link {
  font-size: 1.125rem;
  font-weight: 500;
  color: var(--ink-3);
  padding: 14px 16px;
  border-radius: var(--r-md);
  transition: background var(--dur-fast) ease, color var(--dur-fast) ease;
  text-decoration: none;
}

.drawer-link:hover {
  background: var(--bg-soft);
  color: var(--ink);
}

.drawer-actions {
  display: flex;
  flex-direction: column;
  gap: 12px;
  padding-top: 8px;
  border-top: 1px solid var(--border);
}

.drawer-login {
  font-size: 1rem;
  font-weight: 500;
  color: var(--ink-3);
  padding: 14px 20px;
  border-radius: var(--r-pill);
  border: 1.5px solid var(--border);
  text-align: center;
  text-decoration: none;
  transition: border-color var(--dur-fast) ease, background var(--dur-fast) ease;
}

.drawer-login:hover {
  border-color: var(--ink-3);
  background: var(--bg-soft);
}

.drawer-cta {
  font-size: 1rem;
  font-weight: 600;
  color: #fff;
  background: var(--red);
  padding: 14px 20px;
  border-radius: var(--r-pill);
  text-align: center;
  text-decoration: none;
  transition: background var(--dur-fast) ease;
}

.drawer-cta:hover { background: var(--red-dark); }

/* ── Overlay ───────────────────────────────────── */
.nav-overlay {
  position: fixed;
  inset: 68px 0 0 0;
  z-index: 800;
  background: rgba(0,0,0,0.35);
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.22s ease;
}

.nav-overlay.open {
  opacity: 1;
  pointer-events: all;
}

/* ── Responsive show/hide ──────────────────────── */
@media (max-width: 860px) {
  .nav-links, .nav-actions { display: none; }
  .nav-burger { display: flex; }
}
</style>
