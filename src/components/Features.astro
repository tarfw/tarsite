---
const features = [
  {
    number: '01',
    name: 'TRACE',
    title: 'The AI Memory System',
    description: 'Every item in TAR lives in three dimensions of memory — State, Events, and Trace. Your systems don\'t just store data. They remember it.',
    items: [
      { label: 'State',  desc: 'The universal blueprint. What something is — its recipe, spec, identity.' },
      { label: 'Events', desc: 'What is happening right now. A sale. A stock drop. A singular moment.' },
      { label: 'Trace',  desc: 'Every movement recorded. Forecast demand. Detect failure. Train AI.' },
    ],
    color: '#c8102e',
  },
  {
    number: '02',
    name: 'AGENTS',
    title: 'Autonomous Intelligence',
    description: 'Every instance can have its own AI Agent. They monitor, decide, and act — without dashboards, without polling, without delay.',
    items: [
      { label: 'Monitor', desc: 'Temperature thresholds. Stock levels. Delivery delays. Agents watch everything.' },
      { label: 'Decide',  desc: 'Reroute deliveries. Switch fulfillment. Trigger alerts before failure.' },
      { label: 'Act',     desc: 'Without dashboards. In milliseconds. Agents respond to reality.' },
    ],
    color: '#9333ea',
  },
  {
    number: '03',
    name: 'RELAY',
    title: 'The Nervous System',
    description: 'Relay moves data between every node in your network — customer apps, rider apps, POS, warehouses, and AI agents — at city scale.',
    items: [
      { label: 'Speed',    desc: '400,000+ events per second over high-speed WebSockets.' },
      { label: 'Security', desc: 'Private vRack networking. Zero public internet exposure.' },
      { label: 'Reach',    desc: 'Customer apps. Riders. POS. Warehouses. WhatsApp. All connected.' },
    ],
    color: '#0066ff',
  },
];
---

<section class="features" id="features">

  <div class="features-head">
    <div class="container">
      <span class="eyebrow" data-reveal>Product</span>
      <div class="features-head-inner" data-reveal>
        <h2 class="features-title">
          A city-scale AI<br />commerce platform.
        </h2>
        <p class="features-intro">
          TAR is designed for the real world: offline-first businesses,
          hyperlocal supply chains, and real-time decisions for millions
          of concurrent users.
        </p>
      </div>
    </div>
  </div>

  <div class="features-body">
    {features.map((f, i) => (
      <div class="feat-row" style={`--accent: ${f.color}; --i: ${i}`} data-reveal>
        <div class="container feat-inner">

          <div class="feat-meta">
            <span class="feat-num">{f.number}</span>
            <span class="feat-tag" style={`color: ${f.color}`}>{f.name}</span>
          </div>

          <div class="feat-main">
            <h3 class="feat-title">{f.title}</h3>
            <p class="feat-desc">{f.description}</p>
          </div>

          <ul class="feat-items">
            {f.items.map(item => (
              <li class="feat-item">
                <span class="feat-item-dot" style={`background: ${f.color}`}></span>
                <div>
                  <strong class="feat-item-label">{item.label}</strong>
                  <span class="feat-item-desc">{item.desc}</span>
                </div>
              </li>
            ))}
          </ul>

        </div>
      </div>
    ))}
  </div>

</section>

<style>
/* ── Section ───────────────────────────────────── */
.features {
  background: var(--bg);
}

/* ── Header ────────────────────────────────────── */
.features-head {
  padding: 120px 0 80px;
  border-bottom: 1px solid var(--border);
}

.eyebrow {
  display: inline-block;
  font-size: 0.72rem;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.14em;
  color: var(--red);
  margin-bottom: 28px;
}

.features-head-inner {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 48px;
  align-items: end;
}

.features-title {
  font-size: clamp(2.25rem, 5vw, 3.75rem);
  font-weight: 700;
  line-height: 1.0;
  letter-spacing: -0.035em;
  color: var(--ink);
}

.features-intro {
  font-size: 1.0625rem;
  line-height: 1.72;
  color: var(--body);
  max-width: 420px;
  padding-bottom: 4px;
}

/* ── Feature rows ──────────────────────────────── */
.features-body {
  display: flex;
  flex-direction: column;
}

.feat-row {
  border-bottom: 1px solid var(--border);
  padding: 72px 0;
  transition: background var(--dur-fast) ease;
}

.feat-row:hover {
  background: rgba(0,0,0,0.012);
}

.feat-inner {
  display: grid;
  grid-template-columns: 160px 1fr 1fr;
  gap: 48px;
  align-items: start;
}

/* ── Meta ──────────────────────────────────────── */
.feat-meta {
  display: flex;
  flex-direction: column;
  gap: 8px;
  padding-top: 4px;
}

.feat-num {
  font-family: var(--font-sans);
  font-size: 0.7rem;
  color: var(--muted);
  letter-spacing: 0.06em;
}

.feat-tag {
  font-size: 0.72rem;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.14em;
}

/* ── Main ──────────────────────────────────────── */
.feat-title {
  font-size: clamp(1.5rem, 2.5vw, 2rem);
  font-weight: 700;
  letter-spacing: -0.025em;
  line-height: 1.1;
  color: var(--ink);
  margin-bottom: 16px;
}

.feat-desc {
  font-size: 0.9375rem;
  line-height: 1.72;
  color: var(--body);
  max-width: 380px;
}

/* ── Items ─────────────────────────────────────── */
.feat-items {
  list-style: none;
  display: flex;
  flex-direction: column;
  gap: 0;
  border-top: 1px solid var(--border);
}

.feat-item {
  display: flex;
  gap: 14px;
  align-items: flex-start;
  padding: 20px 0;
  border-bottom: 1px solid var(--border);
}

.feat-item-dot {
  width: 6px;
  height: 6px;
  border-radius: 50%;
  flex-shrink: 0;
  margin-top: 6px;
}

.feat-item-label {
  display: block;
  font-size: 0.875rem;
  font-weight: 600;
  color: var(--ink);
  margin-bottom: 3px;
  letter-spacing: -0.01em;
}

.feat-item-desc {
  display: block;
  font-size: 0.8375rem;
  color: var(--body);
  line-height: 1.55;
}

/* ── Responsive ────────────────────────────────── */
@media (max-width: 900px) {
  .features-head-inner {
    grid-template-columns: 1fr;
    gap: 24px;
  }

  .feat-inner {
    grid-template-columns: 80px 1fr;
    grid-template-rows: auto auto;
    gap: 32px;
  }

  .feat-items {
    grid-column: 1 / -1;
  }
}

@media (max-width: 640px) {
  .features-head {
    padding: 80px 0 60px;
  }

  .feat-row {
    padding: 56px 0;
  }

  .feat-inner {
    grid-template-columns: 1fr;
    gap: 24px;
  }

  .feat-meta {
    flex-direction: row;
    align-items: center;
    gap: 12px;
  }
}
</style>
