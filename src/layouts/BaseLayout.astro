---
interface Props {
  title: string;
}

const { title } = Astro.props;
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="TAR — Trace, Agents, Relays. The operating system for the AI era." />
    <title>{title}</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
  </head>
  <body>
    <slot />
  </body>
</html>

<style is:global>
  /* ─── Design tokens ───────────────────────────── */
  :root {
    /* Red-primary palette */
    --red:          #c8102e;
    --red-dark:     #a00d24;
    --red-light:    #f5e6e9;
    --red-muted:    rgba(200, 16, 46, 0.08);

    /* Neutrals */
    --ink:          #0f0f0f;
    --ink-2:        #1f1f1f;
    --ink-3:        #333333;
    --body:         #555555;
    --muted:        #888888;
    --border:       #e5e5e5;
    --border-dark:  rgba(255,255,255,0.10);
    --bg:           #ffffff;
    --bg-soft:      #f7f6f5;

    /* Dark section bg — deep red-black */
    --dark-bg:      #100508;
    --dark-bg-2:    #1a0810;

    /* Typography */
    --font-display: 'Space Grotesk', system-ui, sans-serif;
    --font-sans:    'Inter', system-ui, -apple-system, sans-serif;

    /* Radius — Square's generous curves */
    --r-sm:   6px;
    --r-md:   12px;
    --r-lg:   20px;
    --r-pill: 100px;

    /* Shadows */
    --shadow-sm:  0 1px 3px rgba(0,0,0,0.06), 0 1px 2px rgba(0,0,0,0.04);
    --shadow-md:  0 4px 16px rgba(0,0,0,0.08), 0 2px 6px rgba(0,0,0,0.04);
    --shadow-lg:  0 12px 40px rgba(0,0,0,0.10), 0 4px 12px rgba(0,0,0,0.06);
    --shadow-xl:  0 24px 64px rgba(0,0,0,0.12), 0 8px 24px rgba(0,0,0,0.08);

    /* Motion */
    --ease-out:   cubic-bezier(0.16, 1, 0.3, 1);
    --ease-in:    cubic-bezier(0.4, 0, 1, 1);
    --dur-fast:   150ms;
    --dur-base:   280ms;
    --dur-slow:   480ms;
  }

  /* ─── Reset ───────────────────────────────────── */
  *, *::before, *::after {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  html {
    scroll-behavior: smooth;
    -webkit-text-size-adjust: 100%;
  }

  body {
    font-family: var(--font-sans);
    background: var(--bg);
    color: var(--ink);
    line-height: 1.6;
    overflow-x: hidden;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  h1, h2, h3, h4, h5, h6 {
    font-family: var(--font-display);
    font-weight: 700;
    line-height: 1.05;
    letter-spacing: -0.03em;
    color: var(--ink);
  }

  p { color: var(--body); }

  a {
    color: inherit;
    text-decoration: none;
  }

  img { max-width: 100%; height: auto; display: block; }

  /* ─── Global utility ──────────────────────────── */
  .container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 40px;
  }

  @media (max-width: 768px) {
    .container { padding: 0 24px; }
  }

  /* ─── Scroll-reveal ───────────────────────────── */
  [data-reveal] {
    opacity: 0;
    transform: translateY(28px);
    transition: opacity var(--dur-slow) var(--ease-out),
                transform var(--dur-slow) var(--ease-out);
  }

  [data-reveal].visible {
    opacity: 1;
    transform: translateY(0);
  }

  [data-reveal="scale"] {
    transform: scale(0.96) translateY(12px);
  }

  [data-reveal="scale"].visible {
    transform: scale(1) translateY(0);
  }
</style>

<script is:inline>
  document.addEventListener('DOMContentLoaded', () => {
    const io = new IntersectionObserver(
      entries => entries.forEach(e => {
        if (e.isIntersecting) {
          e.target.classList.add('visible');
          io.unobserve(e.target);
        }
      }),
      { threshold: 0.08, rootMargin: '0px 0px -40px 0px' }
    );
    document.querySelectorAll('[data-reveal]').forEach(el => io.observe(el));
  });
</script>
